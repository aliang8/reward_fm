# Evaluation Configuration for RFM
# This config is used specifically for evaluation runs

# Model path to load training config from
model_path: "aliangdw/rfm_v6"  # Path to the trained model checkpoint (will load training_config.yaml from here)

# GPU Pool settings
num_gpus: 4  # Number of GPUs to use (null for all available)
max_workers: null  # Max worker threads (null for auto, typically same as num_gpus)

# Evaluation parameters
eval_subset_size: 1000  # Number of samples to evaluate
batch_size: 16  # Batch size for evaluation
num_batches: -1  # Number of batches to evaluate (-1 for full dataset)
server_url: "0.0.0.0"  # Evaluation server URL
server_port: 8000  # Evaluation server port
log_dir: "./eval_logs"  # Directory to save evaluation results

# Data settings (reused from experiment_configs.DataConfig)
data:
  # model_type: "vqa" # "vqa" or "default"
  model_type: "default" # "vqa" or "default"
  # Evaluation dataset settings
  # eval_datasets: ["abraranwar/libero_rfm", "ykorkmaz/libero_failure_rfm"]
  # eval_subsets: ["libero256_10", "libero_10_failure"]
  eval_datasets: ["HenryZhang/metaworld_rewind_rfm_eval"]
  eval_subsets: ["metaworld_rewind_eval"]
  # eval_datasets: ["abraranwar/libero_rfm"]
  # eval_subsets: ["libero256_10"]
  eval_subset_size: 1000  # Number of evaluation examples
  
  # For preprocessing
  max_frames_for_preprocessing: 64

  # Video processing settings
  max_frames: 16
  video_frame_sampling: "uniform"  # "uniform", "random", "first", "middle"
  resized_height: 128  # Height to resize images/videos to
  resized_width: 128  # Width to resize images/videos to
  
  # Data generation settings
  preference_ratio: 1.0  # Ratio of preference prediction samples
  dataset_preference_ratio: 0.7  # Ratio of preferences from dataset vs generated
  preference_strategy_ratio: [0.8, 0.1, 0.1, 0.0]  # [rewind_same_task, suboptimal_same_task, different_task]
  shuffle: true
  seed: 42
  num_proc: 1  # Number of processes for dataset processing
  force_reprocess: false  # Force reprocessing of dataset even if cached version exists
  
  # Data loading settings
  dataloader_pin_memory: false
  dataloader_num_workers: 0
  dataset_type: confusion_matrix

  # extra settings for eval datasets 
  num_bins: 3
  fps: 10

  max_trajectories: 1000